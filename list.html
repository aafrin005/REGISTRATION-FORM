<!DOCTYPE html>
<html>
<head>
<title>Users List</title>
<style>
body {
  font-family: Arial;
  background: #eef2f3;
  padding: 20px;
}
table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 20px;
  background: white;
}
th, td {
  border: 1px solid #ccc;
  padding: 10px;
  text-align: left;
}
button {
  padding: 5px 10px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
}
.update { background: #28a745; color: white; }
.delete { background: #dc3545; color: white; }
</style>
</head>

<body>

<h2>All Users</h2>
<table id="table">
  <thead>
    <tr>
      <th>Name</th><th>Email</th><th>Phone</th>
      <th>Address</th><th>Extra</th><th>Actions</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<script>
const API = "https://script.google.com/macros/s/AKfycbw4sOi0V-AO3qPx-rdwIuPZ90mNH4PTijmvpFfzzorgg6UXs8KQlqwpjiqsUBH3Wri6/exec";

async function loadUsers() {
  const res = await fetch(API + "?action=list");
  const users = await res.json();

  const tbody = document.querySelector("#table tbody");
  tbody.innerHTML = "";

  users.forEach(u => {
    tbody.innerHTML += `
      <tr>
        <td>${u.fullName}</td>
        <td>${u.email}</td>
        <td>${u.phone}</td>
        <td>${u.address}</td>
        <td>${u.extra}</td>
        <td>
          <button class="update" onclick="updateUser('${u.id}')">Update</button>
          <button class="delete" onclick="deleteUser('${u.id}')">Delete</button>
        </td>
      </tr>`;
  });
}

async function deleteUser(id) {
  await fetch(API + "?action=delete&id=" + id);
  loadUsers();
}

async function updateUser(id) {
  const fullName = prompt("New Name:");
  const email = prompt("New Email:");
  const phone = prompt("New Phone:");
  const address = prompt("New Address:");
  const extra = prompt("New Extra:");

  const params = new URLSearchParams({
    action: "update", id, fullName, email, phone, address, extra
  });

  await fetch(API + "?" + params);
  loadUsers();
}

loadUsers();
</script>

</body>
</html>
